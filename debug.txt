/* eslint-disable @next/next/no-img-element */
import type { CSSProperties } from "react";
import { SkyCorner } from "../../components/SkyCorner";
import type { CardTheme, MemorialCardVariant } from "./memorialCardDesigns";

type FontClasses = {
  script: string;
  serif: string;
  sans: string;
};

type MemorialCardContent = {
  titleLine: string;
  subtitleLine: string;
  name: string;
  dates: string;
  tribute: string;
  body: string;
  service: string;
  footer: string;
  notes: string;
  photoUrl: string;
};

type TemplateProps = {
  data: MemorialCardContent;
  fonts: FontClasses;
  theme: CardTheme;
};

function createStyleVars(theme?: CardTheme): CSSProperties {
  if (!theme) {
    return {};
  }

  return {
    '--card-bg': theme.background,
    '--card-text': theme.text,
    '--card-accent': theme.accent,
  } as CSSProperties;
}


export function renderMemorialCardVariant(
  variant: MemorialCardVariant,
  data: MemorialCardContent,
  fonts: FontClasses,
  theme: CardTheme
) {
  switch (variant) {
    case "christian-peach-crest":
      return <ChristianPeachCrest data={data} fonts={fonts} theme={theme} />;
    case "christian-blue-dove":
      return <ChristianBlueDove data={data} fonts={fonts} theme={theme} />;
    case "buddhist-ornate-gold":
      return <BuddhistOrnateGold data={data} fonts={fonts} theme={theme} />;
    case "buddhist-minimal-gold":
      return <BuddhistMinimalGold data={data} fonts={fonts} theme={theme} />;
    case "hindu-sunrise-banner":
      return <HinduSunriseBanner data={data} fonts={fonts} theme={theme} />;
    case "hindu-wreath-classic":
      return <HinduWreathClassic data={data} fonts={fonts} theme={theme} />;
    case "interfaith-noir-arch":
      return <InterfaithNoirArch data={data} fonts={fonts} theme={theme} />;
    case "interfaith-sky-doves":
      return <InterfaithSkyDoves data={data} fonts={fonts} theme={theme} />;
    default:
      return null;
  }
}

function ChristianPeachCrest({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, titleLine, subtitleLine, photoUrl } = data;
  const styleVars = {
    ...createStyleVars(theme),
    '--card-muted': '#3a3a3a',
    '--card-gold': theme?.accent ?? '#d6b56b',
  } as CSSProperties;

  return (
    <div className={`christian-peach-template ${fonts.sans}`} style={styleVars}>
      <div className="card" role="img" aria-label="Memorial card template">
        <span className="floral tr" aria-hidden />
        <span className="floral bl" aria-hidden />

        <div className="content">
          <div className={`cross ${fonts.serif}`} aria-hidden={false}>?</div>
          <p className={`memory ${fonts.script}`}>{titleLine || "In loving memory of"}</p>

          <div className="ring-wrap">
            <div
              className="photo memorial-card-portrait"
              style={{ backgroundImage: `url(${photoUrl})` }}
              aria-label={name ? `Portrait of ${name}` : "Portrait"}
            />
            <span className="ring-floral" aria-hidden />
          </div>

          <p className={`name ${fonts.script}`}>{name}</p>
          <p className={`dates ${fonts.serif}`}>{dates}</p>
          <p className={`desc ${fonts.serif}`}>{tribute || subtitleLine}</p>
        </div>
      </div>

      <style jsx>{`
        .christian-peach-template {
          width: 100%;
          height: 100%;
        }
        .card {
          position: relative;
          width: 100%;
          aspect-ratio: 665 / 960;
          border-radius: 18px;
          overflow: hidden;
          color: var(--card-text, #1c1c1c);
          background:
            radial-gradient(900px 650px at 20% 20%, rgba(255, 255, 255, 0.7), transparent 55%),
            radial-gradient(900px 650px at 80% 70%, rgba(255, 255, 255, 0.55), transparent 60%),
            linear-gradient(180deg, #f8e7e3 0%, #f6efed 55%, #f3e3df 100%);
          box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
        }
        .card::after {
          content: "";
          position: absolute;
          inset: 0;
          pointer-events: none;
          mix-blend-mode: multiply;
          background:
            linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.08));
          opacity: 0.16;
        }
        .content {
          position: relative;
          z-index: 2;
          height: 100%;
          padding: 78px 70px 70px;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
        }
        .cross {
          font-size: 42px;
          margin: 0 0 18px;
        }
        .memory {
          font-size: clamp(3rem, 6vw, 3.6rem);
          margin: 0 0 30px;
        }
        .ring-wrap {
          width: min(430px, 78%);
          aspect-ratio: 1 / 1;
          border-radius: 999px;
          position: relative;
          display: grid;
          place-items: center;
          margin-bottom: 42px;
        }
        .ring-wrap::before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: 999px;
          border: 8px solid var(--card-gold, #d6b56b);
          box-shadow:
            inset 0 0 0 2px rgba(255, 255, 255, 0.28),
            0 10px 24px rgba(0, 0, 0, 0.12);
        }
        .photo {
          width: 87%;
          height: 87%;
          border-radius: 999px;
          background-size: cover;
          background-position: center;
          box-shadow: 0 14px 30px rgba(0, 0, 0, 0.14);
        }
        .ring-floral {
          position: absolute;
          left: -10px;
          bottom: 35px;
          width: clamp(160px, 40%, 230px);
          aspect-ratio: 1 / 1;
          background:
            radial-gradient(circle at 30% 35%, rgba(255, 255, 255, 0.85), transparent 65%),
            radial-gradient(circle at 70% 60%, rgba(214, 181, 107, 0.45), transparent 80%);
          border-radius: 999px;
          filter: drop-shadow(0 10px 14px rgba(0, 0, 0, 0.12));
          pointer-events: none;
        }
        .floral {
          position: absolute;
          pointer-events: none;
          filter: drop-shadow(0 8px 14px rgba(0, 0, 0, 0.1));
          opacity: 0.98;
          background:
            radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.95), transparent 65%),
            radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.55), transparent 70%);
        }
        .floral.tr {
          top: -14px;
          right: -14px;
          width: clamp(220px, 60%, 330px);
          height: clamp(220px, 60%, 330px);
        }
        .floral.bl {
          left: -18px;
          bottom: -18px;
          width: clamp(260px, 70%, 380px);
          height: clamp(260px, 70%, 380px);
        }
        .name {
          font-size: clamp(4rem, 8vw, 5.8rem);
          margin: 0 0 10px;
          line-height: 1;
        }
        .dates {
          font-size: 22px;
          margin: 0 0 12px;
          color: var(--card-muted, #3a3a3a);
          font-style: italic;
        }
        .desc {
          font-size: 20px;
          color: var(--card-muted, #3a3a3a);
          font-style: italic;
          line-height: 1.4;
          margin: 0;
        }
      `}</style>
    </div>
  );
}
function ChristianBlueDove({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, titleLine, subtitleLine, photoUrl } = data;
  const styleVars = {
    ...createStyleVars(theme),
    '--card-muted': '#3b3b3b',
    '--card-ring': theme?.accent ?? '#d6b56b',
  } as CSSProperties;

  return (
    <div className={`christian-blue-template ${fonts.sans}`} style={styleVars}>
      <div className="card" role="img" aria-label="Memorial card template">
        <span className="floral top-right" aria-hidden />
        <span className="floral bottom-left" aria-hidden />
        <span className="floral bottom-right" aria-hidden />

        <div className="content">
          <h1 className={`title ${fonts.serif}`}>{titleLine || "In loving memory of"}</h1>
          <Dove className="dove" />
          <div className="photo-ring">
            <img
              className="photo memorial-card-portrait"
              src={photoUrl}
              alt={name ? `Portrait of ${name}` : "Portrait photo"}
            />
            <span className="ring-floral" aria-hidden />
          </div>
          <p className={`name ${fonts.script}`}>{name}</p>
          <p className={`dates ${fonts.serif}`}>{dates}</p>
          <p className={`subtitle ${fonts.serif}`}>{tribute || subtitleLine}</p>
        </div>
      </div>

      <style jsx>{`
        .christian-blue-template {
          width: 100%;
          height: 100%;
        }
        .card {
          position: relative;
          width: 100%;
          aspect-ratio: 665 / 960;
          border-radius: 18px;
          overflow: hidden;
          color: var(--card-text, #1b1b1b);
          background:
            radial-gradient(1200px 700px at 30% 20%, rgba(255, 255, 255, 0.55), transparent 60%),
            radial-gradient(900px 600px at 80% 70%, rgba(255, 255, 255, 0.35), transparent 55%),
            linear-gradient(180deg, var(--card-bg, #cfe9f8) 0%, #e7f5ff 60%, var(--card-bg, #cfe9f8) 100%);
          box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
        }
        .content {
          position: relative;
          height: 100%;
          padding: 86px 70px 70px;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
        }
        .title {
          font-size: 30px;
          letter-spacing: 0.2px;
          font-style: italic;
          margin: 0 0 14px;
          color: var(--card-muted, #3b3b3b);
        }
        .dove {
          width: 42px;
          height: 42px;
          margin: 6px 0 20px;
          opacity: 0.85;
        }
        .photo-ring {
          width: min(420px, 78%);
          aspect-ratio: 1 / 1;
          border-radius: 999px;
          position: relative;
          display: grid;
          place-items: center;
          margin: 8px 0 34px;
        }
        .photo-ring::before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: 999px;
          border: 6px solid var(--card-ring, #d6b56b);
          box-shadow:
            inset 0 0 0 2px rgba(255, 255, 255, 0.35),
            0 10px 25px rgba(0, 0, 0, 0.12);
        }
        .photo {
          width: 86%;
          height: 86%;
          border-radius: 999px;
          object-fit: cover;
          background: #fff;
          box-shadow: 0 12px 28px rgba(0, 0, 0, 0.14);
        }
        .ring-floral {
          position: absolute;
          right: 18px;
          bottom: 18px;
          width: clamp(110px, 30%, 170px);
          aspect-ratio: 5 / 4;
          pointer-events: none;
          border-radius: 999px;
          background:
            radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.9), transparent 60%),
            radial-gradient(circle at 75% 60%, rgba(214, 181, 107, 0.3), transparent 70%);
          filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.12));
          opacity: 0.85;
        }
        .floral {
          position: absolute;
          width: clamp(180px, 32%, 260px);
          aspect-ratio: 1 / 1;
          opacity: 0.95;
          pointer-events: none;
          filter: drop-shadow(0 6px 10px rgba(0, 0, 0, 0.12));
          background:
            radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.92), transparent 65%),
            radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.5), transparent 70%);
        }
        .floral.top-right {
          top: -20px;
          right: -10px;
        }
        .floral.bottom-left {
          bottom: -20px;
          left: -10px;
          transform: rotate(-2deg);
        }
        .floral.bottom-right {
          bottom: -10px;
          right: -10px;
          width: clamp(140px, 28%, 220px);
          opacity: 0.7;
        }
        .name {
          font-size: clamp(3.6rem, 7vw, 4.9rem);
          line-height: 1;
          margin: 0 0 10px;
          color: var(--card-text, #1b1b1b);
        }
        .dates {
          font-size: 20px;
          color: var(--card-muted, #3b3b3b);
          margin: 0 0 18px;
        }
        .subtitle {
          font-size: 18px;
          color: var(--card-muted, #3b3b3b);
          line-height: 1.35;
          margin: 0;
        }
      `}</style>
    </div>
  );
}
function BuddhistOrnateGold({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, body, service, footer, notes, photoUrl, titleLine, subtitleLine } = data;
  const topLineRaw = (titleLine || tribute || "In loving memory of").trim();
  const topLine = topLineRaw ? topLineRaw.toUpperCase() : "IN LOVING MEMORY OF";
  const displayName = name?.trim() || "Estelle Darcy";
  const displayDates = dates?.trim() || "10.10.1960 - 10.10.2024";

  const splitLines = (value?: string) => {
    if (!value) return [] as string[];
    return value
      .replace(/<br\s*\/?\s*>/gi, "\n")
      .split(/\r?\n/)
      .map((line) => line.trim())
      .filter(Boolean);
  };

  const detailLines = [
    ...splitLines(service),
    ...splitLines(body || subtitleLine || tribute),
    ...splitLines(footer || notes),
  ].slice(0, 3);

  const styleVars = {
    ...createStyleVars(theme),
    '--card-bg': theme?.background ?? '#f7f7f6',
    '--card-ink': theme?.text ?? '#2a2a2a',
    '--card-muted': 'rgba(0,0,0,.62)',
  } as CSSProperties;

  return (
    <div className={`buddhist-ornate-lotus ${fonts.sans}`} style={styleVars}>
      <div className="card" role="img" aria-label="Ornate lotus memorial poster">
        <div className="content">
          <div className="medallion">
            <svg className="wreath" viewBox="0 0 420 360" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <defs>
                <linearGradient id="leafG" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stopColor="#9db7b4" />
                  <stop offset="1" stopColor="#5d7f78" />
                </linearGradient>
                <linearGradient id="leafG2" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stopColor="#b7c9c6" />
                  <stop offset="1" stopColor="#6a8c84" />
                </linearGradient>
                <path id="lotus-leaf" d="M210 40 C224 60, 226 84, 210 106 C194 84, 196 60, 210 40Z" />
              </defs>

              <g transform="translate(0,10)">
                <g transform="translate(210,160)">
                  <g fill="url(#leafG)" opacity=".95">
                    <use xlinkHref="#lotus-leaf" transform="rotate(210) translate(0,-118) rotate(-210) scale(.9)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(230) translate(0,-122) rotate(-230) scale(.95)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(250) translate(0,-124) rotate(-250) scale(.92)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(270) translate(0,-124) rotate(-270) scale(.88)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(290) translate(0,-122) rotate(-290) scale(.92)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(310) translate(0,-118) rotate(-310) scale(.9)" />
                  </g>
                  <g fill="url(#leafG2)" opacity=".85">
                    <use xlinkHref="#lotus-leaf" transform="rotate(220) translate(0,-102) rotate(-220) scale(.75)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(260) translate(0,-104) rotate(-260) scale(.72)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(300) translate(0,-102) rotate(-300) scale(.75)" />
                  </g>
                </g>
              </g>

              <g transform="translate(0,10)">
                <g transform="translate(210,160)">
                  <g fill="url(#leafG)" opacity=".95">
                    <use xlinkHref="#lotus-leaf" transform="rotate(30) translate(0,-118) rotate(-30) scale(.9)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(50) translate(0,-122) rotate(-50) scale(.95)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(70) translate(0,-124) rotate(-70) scale(.92)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(90) translate(0,-124) rotate(-90) scale(.88)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(110) translate(0,-122) rotate(-110) scale(.92)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(130) translate(0,-118) rotate(-130) scale(.9)" />
                  </g>
                  <g fill="url(#leafG2)" opacity=".85">
                    <use xlinkHref="#lotus-leaf" transform="rotate(40) translate(0,-102) rotate(-40) scale(.75)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(80) translate(0,-104) rotate(-80) scale(.72)" />
                    <use xlinkHref="#lotus-leaf" transform="rotate(120) translate(0,-102) rotate(-120) scale(.75)" />
                  </g>
                </g>
              </g>

              <g transform="translate(210,280)">
                <g fill="#c4373a" opacity=".98">
                  <path d="M0,-38 C18,-44 34,-30 28,-10 C20,-6 10,-16 0,-38Z" />
                  <path d="M0,-38 C-18,-44 -34,-30 -28,-10 C-20,-6 -10,-16 0,-38Z" />
                  <path d="M0,-34 C24,-30 30,-4 8,8 C2,4 0,-10 0,-34Z" />
                  <path d="M0,-34 C-24,-30 -30,-4 -8,8 C-2,4 0,-10 0,-34Z" />
                  <path d="M0,-28 C18,-18 14,10 0,18 C-14,10 -18,-18 0,-28Z" />
                </g>
                <circle cx="0" cy="-10" r="7" fill="#f3d5b0" />
                <g fill="#9b2b2e" opacity=".9">
                  <circle cx="-40" cy="-8" r="4" />
                  <circle cx="-32" cy="2" r="3.5" />
                  <circle cx="40" cy="-8" r="4" />
                  <circle cx="32" cy="2" r="3.5" />
                </g>
              </g>
            </svg>

            <div className="photoRing" role="img" aria-label={displayName ? `Portrait of ${displayName}` : 'Portrait'}>
              <div className="photo memorial-card-portrait" style={{ backgroundImage: `url(${photoUrl})` }} />
            </div>
          </div>

          <p className={`topline ${fonts.sans}`}>{topLine}</p>
          <p className={`name ${fonts.script}`}>{displayName}</p>
          <p className={`dates ${fonts.serif}`}>{displayDates}</p>

          {detailLines.length > 0 ? (
            <p className="details">
              {detailLines.map((line, idx) => (
                <span key={`${line}-${idx}`}>
                  {line}
                  {idx < detailLines.length - 1 ? <br /> : null}
                </span>
              ))}
            </p>
          ) : null}
        </div>
      </div>

      <style jsx>{`
        .buddhist-ornate-lotus {
          width: 100%;
          height: 100%;
        }
        .card {
          width: min(665px, 100%);
          aspect-ratio: 3 / 4;
          position: relative;
          overflow: hidden;
          border-radius: 12px;
          background:
            radial-gradient(900px 700px at 30% 20%, rgba(255, 255, 255, 0.7), transparent 60%),
            radial-gradient(900px 700px at 70% 70%, rgba(255, 255, 255, 0.55), transparent 62%),
            linear-gradient(180deg, #f7f7f6 0%, var(--card-bg, #f3f3f1) 100%);
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
          container-type: inline-size;
        }
        .card::after {
          content: '';
          position: absolute;
          inset: 0;
          background:
            repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.015) 0 1px, transparent 1px 6px),
            repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.012) 0 1px, transparent 1px 7px);
          opacity: 0.35;
          pointer-events: none;
          mix-blend-mode: multiply;
        }
        .content {
          position: relative;
          z-index: 2;
          height: 100%;
          padding: 8.421cqw 7.895cqw 7.895cqw;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
          color: var(--card-ink, #2a2a2a);
        }
        .medallion {
          position: relative;
          width: 55.263cqw;
          height: 47.368cqw;
          display: grid;
          place-items: center;
          margin-top: 0.526cqw;
          margin-bottom: 3.684cqw;
        }
        .wreath {
          position: absolute;
          inset: 0;
          pointer-events: none;
          filter: drop-shadow(0 1.316cqw 1.842cqw rgba(0, 0, 0, 0.1));
          opacity: 0.98;
        }
        .photoRing {
          width: 31.579cqw;
          height: 31.579cqw;
          border-radius: 999px;
          position: relative;
          box-shadow: 0 1.842cqw 3.947cqw rgba(0, 0, 0, 0.16);
          border: 1.316cqw solid rgba(214, 181, 107, 0.95);
          display: grid;
          place-items: center;
        }
        .photoRing::before {
          content: '';
          position: absolute;
          inset: 0.789cqw;
          border-radius: 999px;
          border: 0.526cqw solid rgba(255, 255, 255, 0.85);
          pointer-events: none;
        }
        .photo {
          width: 100%;
          height: 100%;
          border-radius: 999px;
          background-size: cover;
          background-position: center;
        }
        .topline {
          font-size: 1.842cqw;
          letter-spacing: 0.26em;
          text-transform: uppercase;
          color: rgba(122, 75, 75, 0.85);
          margin: 0 0 1.579cqw;
        }
        .name {
          font-size: 9.474cqw;
          line-height: 1;
          margin: 0 0 1.579cqw;
          color: rgba(0, 0, 0, 0.72);
        }
        .dates {
          font-size: 2.105cqw;
          color: rgba(0, 0, 0, 0.55);
          letter-spacing: 0.06em;
          margin: 0 0 2.105cqw;
        }
        .details {
          font-size: 1.579cqw;
          letter-spacing: 0.14em;
          text-transform: uppercase;
          color: rgba(0, 0, 0, 0.55);
          line-height: 1.6;
          margin: 0;
        }
        .details span {
          display: inline-block;
          width: 100%;
        }
        @supports (font-size: 1cqw) {
          .topline {
            font-size: clamp(10px, 1.842cqw, 14px);
          }
          .name {
            font-size: clamp(34px, 9.474cqw, 72px);
          }
          .dates {
            font-size: clamp(11px, 2.105cqw, 16px);
          }
          .details {
            font-size: clamp(9px, 1.579cqw, 12px);
          }
        }
        @media print {
          .card {
            box-shadow: none;
            border-radius: 0;
            width: 100%;
          }
        }
      `}</style>
    </div>
  );
}function BuddhistMinimalGold({ data, fonts, theme }: TemplateProps) {
  const { name, dates, titleLine, tribute, service, body, footer, notes, photoUrl } = data;
  const topLineRaw = (titleLine || "In loving memory of").trim();
  const topLine = topLineRaw ? topLineRaw.toUpperCase() : "IN LOVING MEMORY OF";
  const displayName = name?.trim() || "Isabella";
  const displayDates = dates?.trim() || "April 10, 1990 â€“ June 20, 2060";

  const normalizeMultiLine = (value?: string) => {
    if (!value) return [] as string[];
    return value
      .replace(/<br\s*\/?\s*>/gi, "\n")
      .split(/\r?\n/)
      .map((line) => line.trim())
      .filter(Boolean);
  };

  const serviceLines = normalizeMultiLine(service || body || tribute);
  const rsvpLines = normalizeMultiLine(notes || footer);
  const displayServiceLines = serviceLines.length > 0 ? serviceLines : ["April 25 | 2 PM", "[Your Address]"];
  const displayRsvpLines = rsvpLines.length > 0 ? rsvpLines : ["[Your Name]", "[Your Number]", "[Your Email]"];

  const styleVars = {
    ...createStyleVars(theme),
    '--card-bg1': theme?.background ?? '#f7fbff',
    '--card-bg2': '#eef4ff',
    '--card-ink': theme?.text ?? '#121212',
    '--card-muted': 'rgba(0,0,0,.72)',
    '--card-blue': theme?.accent ?? '#2b6fbf',
    '--card-gold-1': '#d8bf78',
    '--card-gold-2': '#b8943d',
  } as CSSProperties;

  return (
    <div className={`buddhist-minimal-watercolor ${fonts.sans}`} style={styleVars}>
      <div className="card" role="img" aria-label="Watercolor memorial invitation">
        <div className="content">
          <p className="topline">{topLine}</p>

          <div className="wreathWrap">
            <WatercolorWreath className="wreathSvg" />
            <div className="photo" role="img" aria-label={displayName ? `Portrait of ${displayName}` : 'Portrait'}>
              <div className="photo-fill memorial-card-portrait" style={{ backgroundImage: `url(${photoUrl})` }} />
            </div>
          </div>

          <p className={`name ${fonts.script}`}>{displayName}</p>
          <p className="dates">{displayDates}</p>

          <p className={`sectionTitle ${fonts.serif}`}>Memorial Service</p>
          <p className="info">
            {displayServiceLines.map((line, idx) => (
              <span key={`${line}-${idx}`}>
                {line}
                {idx < displayServiceLines.length - 1 ? <br /> : null}
              </span>
            ))}
          </p>

          <p className={`sectionTitle ${fonts.serif}`} style={{ marginTop: '3.2cqw' }}>
            RSVP
          </p>
          <p className="rsvp">
            {displayRsvpLines.map((line, idx) => (
              <span key={`${line}-${idx}`}>
                {line}
                {idx < displayRsvpLines.length - 1 ? <br /> : null}
              </span>
            ))}
          </p>
        </div>
      </div>

      <style jsx>{`
        .buddhist-minimal-watercolor {
          width: 100%;
          height: 100%;
        }
        .card {
          width: min(665px, 100%);
          aspect-ratio: 5 / 7;
          position: relative;
          overflow: hidden;
          border-radius: 14px;
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
          container-type: inline-size;
          background:
            radial-gradient(1200px 900px at 22% 18%, rgba(255, 255, 255, 0.8), transparent 58%),
            radial-gradient(1100px 800px at 78% 32%, rgba(255, 255, 255, 0.65), transparent 62%),
            linear-gradient(180deg, var(--card-bg1, #f7fbff) 0%, var(--card-bg2, #eef4ff) 100%);
        }
        .card::before {
          content: '';
          position: absolute;
          inset: -14%;
          background:
            radial-gradient(55cqw 40cqw at 18% 18%, rgba(168, 197, 255, 0.22), transparent 60%),
            radial-gradient(52cqw 38cqw at 78% 22%, rgba(168, 197, 255, 0.18), transparent 60%),
            radial-gradient(70cqw 52cqw at 70% 78%, rgba(168, 197, 255, 0.16), transparent 62%),
            radial-gradient(64cqw 46cqw at 28% 84%, rgba(168, 197, 255, 0.14), transparent 62%);
          filter: blur(0.2cqw);
          opacity: 0.95;
          pointer-events: none;
        }
        .card::after {
          content: '';
          position: absolute;
          inset: 0;
          background:
            repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.016) 0 1px, transparent 1px 6px),
            repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.012) 0 1px, transparent 1px 7px);
          opacity: 0.28;
          pointer-events: none;
          mix-blend-mode: multiply;
        }
        .content {
          position: relative;
          z-index: 2;
          height: 100%;
          padding: 7.6cqw 7.6cqw 7.2cqw;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
          color: var(--card-ink, #121212);
        }
        .topline {
          font-size: 1.85cqw;
          letter-spacing: 0.22em;
          text-transform: uppercase;
          color: rgba(0, 0, 0, 0.7);
          margin: 1.4cqw 0 3.8cqw;
        }
        .wreathWrap {
          position: relative;
          width: 42cqw;
          aspect-ratio: 1 / 1;
          display: grid;
          place-items: center;
          margin: 0 0 4.8cqw;
        }
        .wreathSvg {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          filter: drop-shadow(0 1.1cqw 1.4cqw rgba(0, 0, 0, 0.08));
          opacity: 0.98;
          pointer-events: none;
        }
        .photo {
          width: 22.5cqw;
          height: 22.5cqw;
          border-radius: 999px;
          overflow: hidden;
          background: #fff;
          box-shadow: 0 1.6cqw 3.2cqw rgba(0, 0, 0, 0.16);
          position: relative;
        }
        .photo::before {
          content: '';
          position: absolute;
          inset: 0.55cqw;
          border-radius: 999px;
          border: 0.45cqw solid rgba(255, 255, 255, 0.88);
          pointer-events: none;
          z-index: 2;
        }
        .photo::after {
          content: '';
          position: absolute;
          inset: -0.85cqw;
          border-radius: 999px;
          border: 0.7cqw solid rgba(216, 191, 120, 0.95);
          pointer-events: none;
        }
        .photo-fill {
          width: 100%;
          height: 100%;
          background-size: cover;
          background-position: center;
        }
        .name {
          font-size: 9.2cqw;
          line-height: 1;
          color: var(--card-blue, #2b6fbf);
          margin: 0 0 2.2cqw;
        }
        .dates {
          font-size: 2.15cqw;
          color: rgba(0, 0, 0, 0.7);
          margin: 0 0 2.8cqw;
        }
        .sectionTitle {
          font-size: 2.55cqw;
          letter-spacing: 0.08em;
          text-transform: uppercase;
          margin: 0 0 3.3cqw;
        }
        .info,
        .rsvp {
          font-size: 2.05cqw;
          color: rgba(0, 0, 0, 0.72);
          line-height: 1.8;
          margin: 0;
        }
        .rsvp {
          margin-top: 2.6cqw;
        }
        .info span,
        .rsvp span {
          display: inline-block;
          width: 100%;
        }
        @supports (font-size: 1cqw) {
          .topline {
            font-size: clamp(11px, 1.85cqw, 14px);
          }
          .name {
            font-size: clamp(34px, 9.2cqw, 70px);
          }
          .dates {
            font-size: clamp(12px, 2.15cqw, 16px);
          }
          .sectionTitle {
            font-size: clamp(13px, 2.55cqw, 18px);
          }
          .info,
          .rsvp {
            font-size: clamp(12px, 2.05cqw, 16px);
          }
        }
        @media print {
          .card {
            box-shadow: none;
            border-radius: 0;
            width: 100%;
          }
        }
      `}</style>
    </div>
  );
}

function WatercolorWreath({ className }: { className?: string }) {
  return (
    <svg className={className} viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" aria-hidden>
      <defs>
        <linearGradient id="wc-gold" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="var(--card-gold-1, #d8bf78)" />
          <stop offset="1" stopColor="var(--card-gold-2, #b8943d)" />
        </linearGradient>
        <linearGradient id="leaf1" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="#b9c8b9" />
          <stop offset="1" stopColor="#6f8c75" />
        </linearGradient>
        <linearGradient id="leaf2" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="#d2dfd2" />
          <stop offset="1" stopColor="#7c9b82" />
        </linearGradient>
      </defs>
      <circle cx="200" cy="176" r="106" fill="none" stroke="url(#wc-gold)" strokeWidth="5" opacity="0.9" />
      <circle cx="200" cy="176" r="116" fill="none" stroke="url(#wc-gold)" strokeWidth="2.2" opacity="0.55" />
      <g transform="translate(200,176)">
        <g opacity="0.9">
          {[214, 238, 262, 326, 302, 278].map((angle, idx) => (
            <g key={angle} transform={`rotate(${angle})`}>
              <path d="M0,-132 C10,-118 10,-100 0,-86 C-10,-100 -10,-118 0,-132Z" fill={idx % 2 === 0 ? 'url(#leaf1)' : 'url(#leaf2)'} />
              <path d="M0,-118 C8,-106 8,-92 0,-80 C-8,-92 -8,-106 0,-118Z" fill={idx % 2 === 0 ? 'url(#leaf2)' : 'url(#leaf1)'} opacity="0.85" />
              <path d="M0,-102 C7,-92 7,-82 0,-70 C-7,-82 -7,-92 0,-102Z" fill="url(#leaf1)" opacity="0.9" />
            </g>
          ))}
        </g>
      </g>
      <g transform="translate(200,284)">
        <g opacity="0.95">
          <path d="M-78 -16 C-54 -32 -30 -34 -10 -22 C-28 -4 -52 4 -78 -16Z" fill="url(#leaf1)" />
          <path d="M78 -16 C54 -32 30 -34 10 -22 C28 -4 52 4 78 -16Z" fill="url(#leaf1)" />
          <path d="M-42 -10 C-24 -26 -8 -30 8 -22 C-6 -10 -22 -2 -42 -10Z" fill="url(#leaf2)" opacity="0.9" />
          <path d="M42 -10 C24 -26 8 -30 -8 -22 C6 -10 22 -2 42 -10Z" fill="url(#leaf2)" opacity="0.9" />
        </g>
        {[-38, 0, 38].map((x, idx) => (
          <g key={`flower-${idx}`} transform={`translate(${x},${idx === 1 ? -26 : -18})`}>
            <g fill="#ffffff" opacity="0.98">
              {(idx === 1 ? [0, 36, 72, 108, 144] : [-18, 18, 54, -54, 90]).map((angle) => (
                <ellipse
                  key={angle}
                  cx="0"
                  cy={idx === 1 ? 0 : -10}
                  rx={idx === 1 ? 18 : 16}
                  ry={idx === 1 ? 12 : 10}
                  transform={`rotate(${angle})`}
                />
              ))}
            </g>
            <circle cx="0" cy={idx === 1 ? 0 : -10} r={idx === 1 ? 5.5 : 5} fill="#e9d4a6" />
            <circle cx="-2" cy={(idx === 1 ? 0 : -10) - 2} r="2" fill="#d7b873" opacity="0.9" />
            <circle cx="2" cy={(idx === 1 ? 0 : -10) + 2} r="2" fill="#d7b873" opacity="0.9" />
          </g>
        ))}
      </g>
    </svg>
  );
}function HinduSunriseBanner({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, titleLine, service, body, footer, notes, photoUrl } = data;
  const topLineRaw = (titleLine || tribute || "In loving memory of").trim();
  const topLine = topLineRaw ? topLineRaw.toUpperCase() : "IN LOVING MEMORY OF";
  const displayName = name?.trim() || "Estelle Darcy";
  const displayDates = dates?.trim() || "10.10.1960 - 10.10.2024";

  const normalizeLines = (value?: string) => {
    if (!value) return [] as string[];
    return value
      .replace(/<br\s*\/?\s*>/gi, "\n")
      .split(/\r?\n/)
      .map((line) => line.trim())
      .filter(Boolean);
  };

  const detailLines = normalizeLines(service || body || tribute || footer || notes);
  const displayDetails = detailLines.length > 0
    ? detailLines
    : ['FUNERAL SERVICES AT 9 IN THE MORNING', '11 OCTOBER 2024 · 123 ANYWHERE ST., ANY CITY'];

  const styleVars = {
    ...createStyleVars(theme),
    '--card-bg': theme?.background ?? '#f6f2ee',
    '--card-ink': theme?.text ?? '#222222',
    '--card-muted': 'rgba(0,0,0,.62)',
    '--card-brown': '#7c4e43',
    '--card-green': '#3f6a56',
    '--card-gold-1': '#d7c37a',
    '--card-gold-2': '#b18a30',
  } as CSSProperties;

  return (
    <div className={`hindu-wreath-poster ${fonts.sans}`} style={styleVars}>
      <div className="card" role="img" aria-label="Wreath memorial card">
        <div className="content">
          <div className="wreathWrap">
            <PoinsettiaWreath className="wreathSvg" />
            <div className="photo" role="img" aria-label={displayName ? `Portrait of ${displayName}` : 'Portrait photo'}>
              <div className="photo-fill memorial-card-portrait" style={{ backgroundImage: `url(${photoUrl})` }} />
            </div>
          </div>

          <p className="topline">{topLine}</p>
          <p className={`name ${fonts.script}`}>{displayName}</p>
          <p className="dates">{displayDates}</p>

          <p className="details">
            {displayDetails.map((line, idx) => (
              <span key={`${line}-${idx}`}>
                {line}
                {idx < displayDetails.length - 1 ? <br /> : null}
              </span>
            ))}
          </p>
        </div>
      </div>

      <style jsx>{`
        .hindu-wreath-poster {
          width: 100%;
          height: 100%;
          color: var(--card-ink, #222);
        }
        .card {
          width: min(665px, 100%);
          aspect-ratio: 3 / 4;
          position: relative;
          overflow: hidden;
          border-radius: 14px;
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
          container-type: inline-size;
          background:
            radial-gradient(900px 700px at 30% 20%, rgba(255, 255, 255, 0.7), transparent 60%),
            radial-gradient(900px 700px at 70% 70%, rgba(255, 255, 255, 0.55), transparent 62%),
            linear-gradient(180deg, #fbf8f5 0%, var(--card-bg, #f6f2ee) 100%);
        }
        .card::after {
          content: '';
          position: absolute;
          inset: 0;
          background:
            repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.015) 0 1px, transparent 1px 6px),
            repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.012) 0 1px, transparent 1px 7px);
          opacity: 0.3;
          pointer-events: none;
          mix-blend-mode: multiply;
        }
        .content {
          position: relative;
          z-index: 2;
          height: 100%;
          padding: 7.2cqw 7.2cqw 6.6cqw;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
        }
        .wreathWrap {
          position: relative;
          width: 62cqw;
          aspect-ratio: 1 / 1;
          margin-top: 1.6cqw;
          margin-bottom: 4.6cqw;
          display: grid;
          place-items: center;
        }
        .wreathSvg {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          filter: drop-shadow(0 1.2cqw 1.6cqw rgba(0, 0, 0, 0.1));
          opacity: 0.98;
        }
        .photo {
          width: 40cqw;
          height: 40cqw;
          border-radius: 999px;
          overflow: hidden;
          background: #fff;
          box-shadow: 0 1.8cqw 3.6cqw rgba(0, 0, 0, 0.16);
          position: relative;
        }
        .photo::after {
          content: '';
          position: absolute;
          inset: -1.05cqw;
          border-radius: 999px;
          border: 0.95cqw solid rgba(215, 195, 122, 0.95);
          pointer-events: none;
        }
        .photo::before {
          content: '';
          position: absolute;
          inset: 0.65cqw;
          border-radius: 999px;
          border: 0.5cqw solid rgba(255, 255, 255, 0.86);
          pointer-events: none;
          z-index: 2;
        }
        .photo-fill {
          width: 100%;
          height: 100%;
          background-size: cover;
          background-position: center;
        }
        .topline {
          font-size: 2.05cqw;
          letter-spacing: 0.34em;
          text-transform: uppercase;
          color: rgba(124, 78, 67, 0.88);
          margin: 0 0 2.6cqw;
          font-weight: 600;
        }
        .name {
          font-size: 10.2cqw;
          line-height: 1;
          color: rgba(63, 106, 86, 0.92);
          margin: 0 0 2.2cqw;
        }
        .dates {
          font-size: 2.25cqw;
          color: rgba(0, 0, 0, 0.6);
          letter-spacing: 0.08em;
          margin: 0 0 2.4cqw;
        }
        .details {
          font-size: 1.95cqw;
          letter-spacing: 0.18em;
          text-transform: uppercase;
          color: rgba(124, 78, 67, 0.78);
          line-height: 1.6;
          margin: 0;
          max-width: 78cqw;
        }
        .details span {
          display: inline-block;
          width: 100%;
        }
        @supports (font-size: 1cqw) {
          .topline {
            font-size: clamp(11px, 2.05cqw, 15px);
          }
          .name {
            font-size: clamp(34px, 10.2cqw, 74px);
          }
          .dates {
            font-size: clamp(12px, 2.25cqw, 16px);
          }
          .details {
            font-size: clamp(10px, 1.95cqw, 14px);
          }
        }
        @media print {
          .card {
            box-shadow: none;
            border-radius: 0;
            width: 100%;
          }
        }
      `}</style>
    </div>
  );
}

function PoinsettiaWreath({ className }: { className?: string }) {
  return (
    <svg className={className} viewBox="0 0 520 520" xmlns="http://www.w3.org/2000/svg" aria-hidden>
      <defs>
        <linearGradient id="hw-gold" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="var(--card-gold-1, #d7c37a)" />
          <stop offset="1" stopColor="var(--card-gold-2, #b18a30)" />
        </linearGradient>
        <linearGradient id="hw-leaf-a" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="#b6c9c6" />
          <stop offset="1" stopColor="#6a8c84" />
        </linearGradient>
        <linearGradient id="hw-leaf-b" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stopColor="#9db7b4" />
          <stop offset="1" stopColor="#5d7f78" />
        </linearGradient>
      </defs>
      <circle cx="260" cy="210" r="178" fill="none" stroke="url(#hw-gold)" strokeWidth="8" opacity="0.95" />
      <circle cx="260" cy="210" r="190" fill="none" stroke="url(#hw-gold)" strokeWidth="3" opacity="0.55" />
      <g transform="translate(260,210)" opacity="0.95">
        <g fill="url(#hw-leaf-a)">
          <ellipse cx="-210" cy="-10" rx="22" ry="42" transform="rotate(-18)" />
          <ellipse cx="-198" cy="-62" rx="20" ry="38" transform="rotate(-34)" />
          <ellipse cx="-176" cy="-110" rx="19" ry="36" transform="rotate(-48)" />
          <ellipse cx="-146" cy="-152" rx="18" ry="34" transform="rotate(-60)" />
          <ellipse cx="-110" cy="-184" rx="17" ry="32" transform="rotate(-72)" />
          <ellipse cx="210" cy="-10" rx="22" ry="42" transform="rotate(18)" />
          <ellipse cx="198" cy="-62" rx="20" ry="38" transform="rotate(34)" />
          <ellipse cx="176" cy="-110" rx="19" ry="36" transform="rotate(48)" />
          <ellipse cx="146" cy="-152" rx="18" ry="34" transform="rotate(60)" />
          <ellipse cx="110" cy="-184" rx="17" ry="32" transform="rotate(72)" />
        </g>
        <g fill="url(#hw-leaf-b)" opacity="0.88">
          <ellipse cx="-206" cy="40" rx="20" ry="38" transform="rotate(10)" />
          <ellipse cx="-190" cy="90" rx="18" ry="34" transform="rotate(22)" />
          <ellipse cx="-164" cy="130" rx="17" ry="32" transform="rotate(34)" />
          <ellipse cx="-130" cy="160" rx="16" ry="30" transform="rotate(48)" />
          <ellipse cx="206" cy="40" rx="20" ry="38" transform="rotate(-10)" />
          <ellipse cx="190" cy="90" rx="18" ry="34" transform="rotate(-22)" />
          <ellipse cx="164" cy="130" rx="17" ry="32" transform="rotate(-34)" />
          <ellipse cx="130" cy="160" rx="16" ry="30" transform="rotate(-48)" />
        </g>
      </g>
      <g transform="translate(260,412)">
        <g fill="#c4373a" opacity="0.98">
          <path d="M0,-84 C36,-92 68,-60 56,-24 C42,-14 22,-34 0,-84Z" />
          <path d="M0,-84 C-36,-92 -68,-60 -56,-24 C-42,-14 -22,-34 0,-84Z" />
          <path d="M0,-76 C54,-68 68,-12 18,22 C4,12 0,-26 0,-76Z" />
          <path d="M0,-76 C-54,-68 -68,-12 -18,22 C-4,12 0,-26 0,-76Z" />
          <path d="M0,-62 C40,-40 32,22 0,40 C-32,22 -40,-40 0,-62Z" />
        </g>
        <g fill="#9b2b2e" opacity="0.92">
          <path d="M0,-48 C24,-54 40,-38 34,-20 C24,-14 12,-26 0,-48Z" />
          <path d="M0,-48 C-24,-54 -40,-38 -34,-20 C-24,-14 -12,-26 0,-48Z" />
        </g>
        <circle cx="0" cy="-22" r="10" fill="#f3d5b0" />
        <circle cx="-4" cy="-26" r="3" fill="#d7b873" opacity="0.9" />
        <circle cx="4" cy="-18" r="3" fill="#d7b873" opacity="0.9" />
        <g fill="#ffffff" opacity="0.95">
          <circle cx="-70" cy="-10" r="8" />
          <circle cx="-54" cy="-2" r="6" />
          <circle cx="70" cy="-10" r="8" />
          <circle cx="54" cy="-2" r="6" />
        </g>
        <g fill="#e6eef0" opacity="0.9">
          <circle cx="-62" cy="10" r="5" />
          <circle cx="62" cy="10" r="5" />
        </g>
        <g stroke="#6a8c84" strokeWidth="2" strokeLinecap="round" opacity="0.7">
          <path d="M-96 -12 C-80 -10 -70 -18 -58 -28" />
          <path d="M96 -12 C80 -10 70 -18 58 -28" />
        </g>
      </g>
    </svg>
  );
}function HinduWreathClassic({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, service, body, photoUrl } = data;
  const styleVars = createStyleVars(theme);
  return (
    <div className={`hindu-wreath ${fonts.sans}`} style={styleVars}>
      <div className="medallion">
        <div className="wreath" aria-hidden />
        <div className="photo-ring" style={{ backgroundImage: `url(${photoUrl})` }} />
      </div>
      <p className="topline">{tribute || "In Loving Memory"}</p>
      <p className={`name ${fonts.script}`}>{name}</p>
      <p className="dates">{dates}</p>
      <p className="details">{service}</p>
      <p className="footer">{body}</p>
      <style jsx>{`
        .hindu-wreath {
          width: 100%;
          aspect-ratio: 665 / 960;
          border-radius: 12px;
          background:
            radial-gradient(900px 700px at 30% 20%, rgba(255, 255, 255, 0.7), transparent 60%),
            radial-gradient(900px 700px at 70% 70%, rgba(255, 255, 255, 0.55), transparent 62%),
            linear-gradient(180deg, #f7f7f6 0%, #f3f3f1 100%);
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
          padding: 64px 60px 60px;
          text-align: center;
          position: relative;
        }
        .medallion {
          position: relative;
          width: 420px;
          max-width: 100%;
          height: 360px;
          margin: 0 auto 24px;
        }
        .wreath {
          position: absolute;
          inset: 0;
          background:
            radial-gradient(circle at 30% 50%, rgba(157, 183, 180, 0.6), transparent 65%),
            radial-gradient(circle at 70% 50%, rgba(93, 127, 120, 0.6), transparent 65%);
          filter: blur(1px);
        }
        .photo-ring {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -55%);
          width: 240px;
          height: 240px;
          border-radius: 999px;
          background-size: cover;
          background-position: center;
          border: 10px solid rgba(214, 181, 107, 0.95);
          box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
        }
        .topline {
          font-size: 14px;
          letter-spacing: 0.26em;
          color: rgba(122, 75, 75, 0.85);
          margin: 0 0 12px;
        }
        .name {
          font-size: 72px;
          color: rgba(0, 0, 0, 0.72);
          margin: 0 0 12px;
        }
        .dates {
          font-size: 16px;
          color: rgba(0, 0, 0, 0.55);
          letter-spacing: 0.06em;
          margin: 0 0 16px;
        }
        .details {
          font-size: 12px;
          letter-spacing: 0.14em;
          color: rgba(0, 0, 0, 0.55);
          margin: 0 0 18px;
        }
        .footer {
          font-size: 12px;
          color: rgba(0, 0, 0, 0.55);
          letter-spacing: 0.04em;
        }
      `}</style>
    </div>
  );
}
function InterfaithNoirArch({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, body, service, footer, photoUrl, titleLine } = data;
  const styleVars = createStyleVars(theme);
  return (
    <div className={`noir-arch ${fonts.sans}`} style={styleVars}>
      <div className="family">{titleLine || "Your Family"}</div>
      <div className="hero">
        <div className="arch" />
        <svg className="curve" viewBox="0 0 520 190" aria-hidden>
          <defs>
            <path id="arc" d="M60,160 A200,200 0 0,1 460,160" />
          </defs>
          <text>
            <textPath href="#arc" startOffset="50%" textAnchor="middle">
              + IN LOVING MEMORIES +
            </textPath>
          </text>
        </svg>
        <div className="portrait" style={{ backgroundImage: `url(${photoUrl})` }} />
        <div className="flowers" aria-hidden />
      </div>
      <p className={`name ${fonts.script}`}>{name}</p>
      <p className="date">{dates}</p>
      <p className="para">{tribute || body}</p>
      <p className="location">{service || footer}</p>
      <style jsx>{`
        .noir-arch {
          width: 100%;
          aspect-ratio: 665 / 960;
          border-radius: 14px;
          background:
            radial-gradient(900px 700px at 50% 25%, rgba(255, 255, 255, 0.08), transparent 60%),
            radial-gradient(700px 520px at 50% 55%, rgba(255, 255, 255, 0.05), transparent 65%),
            linear-gradient(180deg, #0b1c38 0%, #071224 55%, #071023 100%);
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.5);
          padding: 52px 52px 54px;
          color: #fff;
          text-align: center;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
        .family {
          font-family: "Cinzel", serif;
          letter-spacing: 0.1em;
          font-size: 18px;
          text-transform: uppercase;
          margin: 0 0 18px;
          position: relative;
          padding-bottom: 10px;
        }
        .family::after {
          content: "";
          position: absolute;
          left: 50%;
          bottom: 0;
          width: 220px;
          height: 2px;
          background: rgba(255, 255, 255, 0.55);
          transform: translateX(-50%);
        }
        .hero {
          position: relative;
          width: 520px;
          max-width: 92%;
          height: 520px;
          margin-bottom: 18px;
        }
        .arch {
          position: absolute;
          inset: 30px 70px 60px;
          border: 4px solid rgba(212, 176, 106, 0.95);
          border-bottom: none;
          border-top-left-radius: 260px;
          border-top-right-radius: 260px;
        }
        .arch::after {
          content: "";
          position: absolute;
          inset: 10px 12px 0;
          border: 2px solid rgba(212, 176, 106, 0.55);
          border-bottom: none;
          border-top-left-radius: 240px;
          border-top-right-radius: 240px;
        }
        .curve {
          position: absolute;
          top: 0;
          width: 100%;
          height: 180px;
        }
        .curve text {
          font-family: "Cinzel", serif;
          letter-spacing: 0.12em;
          font-size: 22px;
          fill: rgba(255, 255, 255, 0.92);
        }
        .portrait {
          width: 250px;
          height: 250px;
          border-radius: 999px;
          background-size: cover;
          background-position: center;
          border: 8px solid rgba(10, 24, 48, 0.55);
          box-shadow: 0 18px 40px rgba(0, 0, 0, 0.28);
          margin: 70px auto 0;
        }
        .flowers {
          position: absolute;
          bottom: 70px;
          left: 50%;
          width: 360px;
          height: 180px;
          transform: translateX(-50%);
          background: radial-gradient(circle, rgba(10, 51, 82, 0.9), transparent 70%);
          filter: blur(1px);
          opacity: 0.5;
        }
        .name {
          font-size: 72px;
          color: #d4b06a;
          margin: 6px 0 10px;
        }
        .date {
          font-family: "Cinzel", serif;
          letter-spacing: 0.1em;
          font-size: 18px;
          margin: 0 0 14px;
        }
        .para {
          max-width: 520px;
          font-size: 12px;
          line-height: 1.6;
          color: rgba(255, 255, 255, 0.72);
          margin: 0 0 22px;
        }
        .location {
          font-family: "Cinzel", serif;
          letter-spacing: 0.1em;
          text-transform: uppercase;
          font-size: 18px;
          color: rgba(255, 255, 255, 0.92);
          margin-top: auto;
        }
      `}</style>
    </div>
  );
}
function InterfaithSkyDoves({ data, fonts, theme }: TemplateProps) {
  const { name, dates, tribute, body, service, footer, photoUrl, titleLine } = data;
  const styleVars = createStyleVars(theme);
  return (
    <div className={`sky-doves ${fonts.sans}`} style={styleVars}>
      <div className="border" />
      <Dove className="dove tl" />
      <Dove className="dove tr" />
      <Dove className="dove r" />
      <div className="content">
        <p className={`topline ${fonts.script}`}>{titleLine || "In loving memory of"}</p>
        <div className="portrait" style={{ backgroundImage: `url(${photoUrl})` }} />
        <p className="name">{name}</p>
        <p className="dates">{dates}</p>
        <p className="body">{tribute || body}</p>
        <p className="service">{service}</p>
        <p className="venue">{footer}</p>
      </div>
      <style jsx>{`
        .sky-doves {
          width: 100%;
          aspect-ratio: 665 / 960;
          border-radius: 10px;
          background:
            radial-gradient(900px 650px at 50% 20%, rgba(255, 255, 255, 0.18), transparent 60%),
            linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.55) 100%),
            linear-gradient(180deg, #a7c6ea 0%, #fefefe 60%);
          box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
          position: relative;
          overflow: hidden;
        }
        .border {
          position: absolute;
          inset: 18px;
          border: 1px solid rgba(20, 30, 60, 0.35);
          border-radius: 6px;
          z-index: 2;
        }
        .dove {
          position: absolute;
          width: 140px;
          opacity: 0.95;
          filter: drop-shadow(0 10px 14px rgba(0, 0, 0, 0.18));
          z-index: 2;
        }
        .dove.tl {
          top: 70px;
          left: 30px;
          transform: rotate(-12deg) scale(0.9);
        }
        .dove.tr {
          top: 10px;
          right: -10px;
          transform: rotate(10deg) scale(1.05);
        }
        .dove.r {
          top: 220px;
          right: -10px;
          transform: rotate(-6deg) scale(0.95);
        }
        .content {
          position: relative;
          z-index: 3;
          height: 100%;
          padding: 54px 52px 54px;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
          color: #0f0f0f;
        }
        .topline {
          font-size: 48px;
          margin: 12px 0 22px;
          color: rgba(0, 0, 0, 0.72);
        }
        .portrait {
          width: 240px;
          height: 240px;
          border-radius: 999px;
          background-size: cover;
          background-position: center;
          border: 10px solid rgba(255, 255, 255, 0.7);
          box-shadow: 0 16px 34px rgba(0, 0, 0, 0.2);
          margin-bottom: 18px;
        }
        .name {
          font-weight: 800;
          font-size: 34px;
          margin: 4px 0 8px;
          letter-spacing: 0.03em;
        }
        .dates {
          font-size: 12px;
          font-weight: 700;
          letter-spacing: 0.08em;
          margin: 0 0 16px;
          color: rgba(0, 0, 0, 0.7);
        }
        .body {
          font-size: 14px;
          line-height: 1.45;
          text-transform: uppercase;
          letter-spacing: 0.02em;
          color: rgba(0, 0, 0, 0.75);
          margin: 0 0 14px;
        }
        .service {
          font-size: 14px;
          font-weight: 800;
          letter-spacing: 0.04em;
          margin: 6px 0 16px;
          color: rgba(0, 0, 0, 0.8);
        }
        .venue {
          font-size: 26px;
          font-weight: 700;
          color: rgba(0, 0, 0, 0.78);
        }
      `}</style>
    </div>
  );
}

function Dove({ className }: { className?: string }) {
  return (
    <svg className={className} viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
      <path d="M50 20c-7 4-13 3-18-2 0 8-6 14-14 15 5 4 12 7 20 7 7 0 13-3 18-9 2-3 2-8-6-11z" fill="rgba(255,255,255,.9)" />
      <path d="M20 33c6-2 10-7 10-15-6 4-12 9-10 15z" fill="rgba(255,255,255,.7)" />
    </svg>
  );
}




































